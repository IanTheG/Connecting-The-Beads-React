{"ast":null,"code":"import _regeneratorRuntime from\"/Users/iantheg/Documents/Git/Connecting-The-Beads/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/iantheg/Documents/Git/Connecting-The-Beads/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/iantheg/Documents/Git/Connecting-The-Beads/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/iantheg/Documents/Git/Connecting-The-Beads/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useState}from'react';import{useHistory,useLocation,useParams}from'react-router';import{initialState}from'../utils/interfaces';import{fadeAnimation}from'../utils/functions';import getMystery from'../utils/api';import Decade from'./Decade';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Mystery=function Mystery(){var history=useHistory();var location=useLocation();// Sets a default state for location, otherwise crashes app\nvar location2=_objectSpread(_objectSpread({},location),{},{state:location.state?location.state:{decade:0}});var _useParams=useParams(),mystery=_useParams.mystery;var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentMystery=_useState2[0],setCurrentMystery=_useState2[1];var _useState3=useState(initialState),_useState4=_slicedToArray(_useState3,2),currentDecade=_useState4[0],setCurrentDecade=_useState4[1];// Initializes the chosen mystery in state (prevents repeated server GET requests)\nuseEffect(function(){fadeAnimation();var mounted=true;var initializeMystery=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var chosenMystery;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getMystery(mystery);case 2:chosenMystery=_context.sent;if(chosenMystery)setCurrentMystery(chosenMystery.data);else history.push('/');case 4:case\"end\":return _context.stop();}}},_callee);}));return function initializeMystery(){return _ref.apply(this,arguments);};}();mounted&&initializeMystery();return function(){mounted=false;};},[]);// Re-renders when state in location object changes or mystery changes, enables forward-backward navigation\nuseEffect(function(){currentMystery&&setCurrentDecade(currentMystery.decades[location2.state.decade]);},[currentMystery,location2.state.decade]);return currentMystery?/*#__PURE__*/_jsx(Decade,{mysteryName:mystery,currentDecade:currentDecade}):/*#__PURE__*/_jsx(Loading,{mysteryName:mystery});};export default Mystery;var Loading=function Loading(_ref2){var mysteryName=_ref2.mysteryName;useEffect(function(){fadeAnimation();});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{alignItems:'center',justifyContent:'center'},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"loading\",style:{textAlign:'center',margin:'1rem'},children:[\"Loading the \",mysteryName.charAt(0).toUpperCase()+mysteryName.slice(1),\" Mysteries\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"hero-line\"})]});};","map":{"version":3,"sources":["/Users/iantheg/Documents/Git/Connecting-The-Beads/src/components/Mystery.tsx"],"names":["React","useEffect","useState","useHistory","useLocation","useParams","initialState","fadeAnimation","getMystery","Decade","Mystery","history","location","location2","state","decade","mystery","currentMystery","setCurrentMystery","currentDecade","setCurrentDecade","mounted","initializeMystery","chosenMystery","data","push","decades","Loading","mysteryName","alignItems","justifyContent","textAlign","margin","charAt","toUpperCase","slice"],"mappings":"4gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,WAArB,CAAkCC,SAAlC,KAAmD,cAAnD,CAGA,OAAkBC,YAAlB,KAAgD,qBAAhD,CACA,OAASC,aAAT,KAA8B,oBAA9B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,wFAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAEpB,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAEA,GAAMS,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA;AACA,GAAMS,CAAAA,SAAqC,gCACtCD,QADsC,MAEzCE,KAAK,CAAEF,QAAQ,CAACE,KAAT,CAAiBF,QAAQ,CAACE,KAA1B,CAAkC,CAACC,MAAM,CAAE,CAAT,CAFA,EAA3C,CAPoB,eAYAV,SAAS,EAZT,CAYZW,OAZY,YAYZA,OAZY,eAcwBd,QAAQ,EAdhC,wCAcbe,cAda,eAcGC,iBAdH,8BAesBhB,QAAQ,CAAUI,YAAV,CAf9B,yCAeba,aAfa,eAeEC,gBAfF,eAiBpB;AACAnB,SAAS,CAAC,UAAM,CACdM,aAAa,GACb,GAAIc,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAMC,CAAAA,iBAAiB,0FAAG,2KACId,CAAAA,UAAU,CAACQ,OAAD,CADd,QAClBO,aADkB,eAExB,GAAIA,aAAJ,CAAmBL,iBAAiB,CAACK,aAAa,CAACC,IAAf,CAAjB,CAAnB,IACKb,CAAAA,OAAO,CAACc,IAAR,CAAa,GAAb,EAHmB,sDAAH,kBAAjBH,CAAAA,iBAAiB,0CAAvB,CAKAD,OAAO,EAAIC,iBAAiB,EAA5B,CAEA,MAAO,WAAM,CACXD,OAAO,CAAG,KAAV,CACD,CAFD,CAGD,CAdQ,CAcN,EAdM,CAAT,CAgBA;AACApB,SAAS,CAAC,UAAM,CACZgB,cAAc,EAAIG,gBAAgB,CAACH,cAAc,CAACS,OAAf,CAAuBb,SAAS,CAACC,KAAV,CAAgBC,MAAvC,CAAD,CAAlC,CACH,CAFQ,CAEN,CAACE,cAAD,CAAiBJ,SAAS,CAACC,KAAV,CAAgBC,MAAjC,CAFM,CAAT,CAIA,MACEE,CAAAA,cAAc,cACZ,KAAC,MAAD,EAAQ,WAAW,CAAED,OAArB,CAA8B,aAAa,CAAEG,aAA7C,EADY,cAEZ,KAAC,OAAD,EAAS,WAAW,CAAEH,OAAtB,EAHJ,CAKD,CA5CD,CA8CA,cAAeN,CAAAA,OAAf,CAEA,GAAMiB,CAAAA,OAA0C,CAAG,QAA7CA,CAAAA,OAA6C,OAAqB,IAAlBC,CAAAA,WAAkB,OAAlBA,WAAkB,CAEtE3B,SAAS,CAAC,UAAM,CACdM,aAAa,GACd,CAFQ,CAAT,CAIA,mBACE,aAAK,SAAS,CAAC,WAAf,CAA2B,KAAK,CAAE,CAAEsB,UAAU,CAAE,QAAd,CAAwBC,cAAc,CAAE,QAAxC,CAAlC,wBACE,YAAI,SAAS,CAAC,SAAd,CAAwB,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAuBC,MAAM,CAAE,MAA/B,CAA/B,0BAAqFJ,WAAW,CAACK,MAAZ,CAAmB,CAAnB,EAAsBC,WAAtB,GAAsCN,WAAW,CAACO,KAAZ,CAAkB,CAAlB,CAA3H,gBADF,cAEE,YAAK,SAAS,CAAC,WAAf,EAFF,GADF,CAOD,CAbD","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useHistory, useLocation, useParams } from 'react-router'\nimport { Location as Locale } from 'history'\n\nimport { DecadeI, initialState, MysteryI } from '../utils/interfaces'\nimport { fadeAnimation } from '../utils/functions'\nimport getMystery from '../utils/api'\n\nimport Decade from './Decade'\n\nconst Mystery = () => {\n\n  const history = useHistory()\n\n  const location = useLocation<{ decade: number }>()\n\n  // Sets a default state for location, otherwise crashes app\n  const location2: Locale<{ decade: number }> = {\n    ...location,\n    state: location.state ? location.state : {decade: 0}\n  }\n\n  const { mystery } = useParams<{ mystery: string }>()\n\n  const [currentMystery, setCurrentMystery] = useState<MysteryI>()\n  const [currentDecade, setCurrentDecade] = useState<DecadeI>(initialState)\n\n  // Initializes the chosen mystery in state (prevents repeated server GET requests)\n  useEffect(() => {\n    fadeAnimation()\n    let mounted = true\n    \n    const initializeMystery = async () => {\n      const chosenMystery = await getMystery(mystery)\n      if (chosenMystery) setCurrentMystery(chosenMystery.data)\n      else history.push('/')\n    }\n    mounted && initializeMystery();\n\n    return () => {\n      mounted = false\n    }\n  }, [])\n\n  // Re-renders when state in location object changes or mystery changes, enables forward-backward navigation\n  useEffect(() => {\n      currentMystery && setCurrentDecade(currentMystery.decades[location2.state.decade])\n  }, [currentMystery, location2.state.decade])\n\n  return (\n    currentMystery\n    ? <Decade mysteryName={mystery} currentDecade={currentDecade} />\n    : <Loading mysteryName={mystery} />\n  )\n}\n\nexport default Mystery\n\nconst Loading: React.FC<{ mysteryName: string }> = ({ mysteryName }) => {\n\n  useEffect(() => {\n    fadeAnimation()\n  })\n\n  return (\n    <div className=\"container\" style={{ alignItems: 'center', justifyContent: 'center' }}>\n      <h2 className=\"loading\" style={{ textAlign: 'center', margin: '1rem' }}>Loading the {mysteryName.charAt(0).toUpperCase() + mysteryName.slice(1)} Mysteries</h2>\n      <div className=\"hero-line\"></div>\n\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}